CREATE SEQUENCE POSL AS integer start 100 INCREMENT BY 2;

CREATE TABLE PLAN (
  plan_id INTEGER NOT NULL DEFAULT nextval('POSL') PRIMARY KEY,    
  subject_id SMALLINT NOT NULL,
  amount_of_hours INTEGER CHECK (amount_of_hours > 0),  
  group_id SMALLINT NOT NULL
);    

CREATE TABLE SUBJECT (
  subject_id SMALLINT PRIMARY KEY,
  name VARCHAR(30) NOT NULL,
  computers_need BOOLEAN DEFAULT false
);

CREATE TABLE GROUPS (
  group_id SMALLINT PRIMARY KEY,
  number_of_students INTEGER NOT NULL CHECK (number_of_students > 0)
);

CREATE TABLE CLASSROOM (
  classroom_id SMALLINT PRIMARY KEY,
  number SMALLINT NOT NULL,
  number_of_seats SMALLINT,
  computers SMALLINT DEFAULT 10
);

CREATE TABLE TEACHER (
  teacher_id SMALLINT PRIMARY KEY,    
  first_name VARCHAR(30) NOT NULL,
  last_name VARCHAR(30) NOT NULL,  
  function VARCHAR(30),
  UNIQUE (first_name,last_name )
);    

CREATE TABLE PAIR (
  pair_id SERIAL PRIMARY KEY,    
  subject_id SMALLINT NOT NULL,
  teachers INTEGER NOT NULL, 
  classrooms INTEGER NOT NULL,
  groups INTEGER NOT NULL,
  time TIME NOT NULL, 
  weekday SMALLINT NOT NULL
); 

INSERT INTO SUBJECT VALUES(1,'Математический анализ', false);
INSERT INTO SUBJECT VALUES(2,'Линейная алгебра',false);
INSERT INTO SUBJECT VALUES(3,'Базы данных',true);
INSERT INTO SUBJECT VALUES(4,'Операционые системы',true);
INSERT INTO SUBJECT VALUES(5,'Программирование',true);
INSERT INTO SUBJECT VALUES(6,'Физическая культура',false);
INSERT INTO SUBJECT VALUES(7,'Физика',false);
INSERT INTO SUBJECT VALUES(8,'Русский язык',false);
INSERT INTO SUBJECT VALUES(10,'Численные методы',true);
INSERT INTO SUBJECT VALUES(11,'Аналитическая геометрия',false);


INSERT INTO GROUPS VALUES(1,25);
INSERT INTO GROUPS VALUES(2,14);
INSERT INTO GROUPS VALUES(3,12);
INSERT INTO GROUPS VALUES(4,33);
INSERT INTO GROUPS VALUES(5,24);
INSERT INTO GROUPS VALUES(6,13);
INSERT INTO GROUPS VALUES(7,29);
INSERT INTO GROUPS VALUES(8,27);
INSERT INTO GROUPS VALUES(9,25);
INSERT INTO GROUPS VALUES(10,17);

INSERT INTO CLASSROOM VALUES(1,224,30);
INSERT INTO CLASSROOM VALUES(2,138,100,0);
INSERT INTO CLASSROOM VALUES(3,601,18,16);
INSERT INTO CLASSROOM VALUES(4,696,50);
INSERT INTO CLASSROOM VALUES(5,344,26);
INSERT INTO CLASSROOM VALUES(6,118,18,5);
INSERT INTO CLASSROOM VALUES(7,1,200);
INSERT INTO CLASSROOM VALUES(8,321,20,0);
INSERT INTO CLASSROOM VALUES(9,577,40,20);
INSERT INTO CLASSROOM VALUES(10,680,60,20);
INSERT INTO CLASSROOM VALUES(11,497,20,20);
INSERT INTO CLASSROOM VALUES(12,223,25,18);


INSERT INTO TEACHER VALUES(1,'Антипов','Ярослав','Профессор');
INSERT INTO TEACHER VALUES(2,'Бабенко','Андрей','Профессор');
INSERT INTO TEACHER VALUES(3,'Власов','Михаил','Доцент');
INSERT INTO TEACHER VALUES(4,'Гуленко','Сергей','Доцент');
INSERT INTO TEACHER VALUES(5,'Дятлов','Антон','Преподаватель');
INSERT INTO TEACHER VALUES(6,'Ершов','Генадий','Преподаватель');
INSERT INTO TEACHER VALUES(7,'Жорин','Илья','Ассистент');
INSERT INTO TEACHER VALUES(8,'Занин','Дмитрий ','Ассистент');
INSERT INTO TEACHER VALUES(9,'Ильясов','Генадий','Доцент');
INSERT INTO TEACHER VALUES(10,'Коновалов','Юрий','Профессор');


INSERT INTO PLAN VALUES(default,1,40,1);
INSERT INTO PLAN VALUES(default,1,40,2);
INSERT INTO PLAN VALUES(default,1,40,3);
INSERT INTO PLAN VALUES(default,1,40,4);
INSERT INTO PLAN VALUES(default,1,40,5);
INSERT INTO PLAN VALUES(default,1,30,6);
INSERT INTO PLAN VALUES(default,1,30,7);
INSERT INTO PLAN VALUES(default,1,30,8);
INSERT INTO PLAN VALUES(default,1,30,9);
INSERT INTO PLAN VALUES(default,1,30,10);
INSERT INTO PLAN VALUES(default,2,35,1);
INSERT INTO PLAN VALUES(default,2,35,2);
INSERT INTO PLAN VALUES(default,2,35,3);
INSERT INTO PLAN VALUES(default,2,35,4);
INSERT INTO PLAN VALUES(default,2,35,5);
INSERT INTO PLAN VALUES(default,2,35,6);
INSERT INTO PLAN VALUES(default,2,35,7);
INSERT INTO PLAN VALUES(default,2,35,8);
INSERT INTO PLAN VALUES(default,2,35,9);
INSERT INTO PLAN VALUES(default,2,35,10);
INSERT INTO PLAN VALUES(default,8,20,1);
INSERT INTO PLAN VALUES(default,8,20,2);
INSERT INTO PLAN VALUES(default,8,20,3);
INSERT INTO PLAN VALUES(default,8,20,4);
INSERT INTO PLAN VALUES(default,8,20,5);
INSERT INTO PLAN VALUES(default,8,25,6);
INSERT INTO PLAN VALUES(default,8,25,7);
INSERT INTO PLAN VALUES(default,8,25,8);
INSERT INTO PLAN VALUES(default,8,25,9);
INSERT INTO PLAN VALUES(default,8,25,10);
INSERT INTO PLAN VALUES(default,5,40,1);
INSERT INTO PLAN VALUES(default,5,40,2);
INSERT INTO PLAN VALUES(default,5,40,3);
INSERT INTO PLAN VALUES(default,5,40,4);
INSERT INTO PLAN VALUES(default,5,40,5);
INSERT INTO PLAN VALUES(default,5,40,6);
INSERT INTO PLAN VALUES(default,5,30,7);
INSERT INTO PLAN VALUES(default,5,30,8);
INSERT INTO PLAN VALUES(default,5,30,9);
INSERT INTO PLAN VALUES(default,5,30,10);
INSERT INTO PLAN VALUES(default,6,28,1);
INSERT INTO PLAN VALUES(default,6,28,2);
INSERT INTO PLAN VALUES(default,6,28,3);
INSERT INTO PLAN VALUES(default,6,28,4);
INSERT INTO PLAN VALUES(default,6,28,5);
INSERT INTO PLAN VALUES(default,6,34,6);
INSERT INTO PLAN VALUES(default,6,34,7);
INSERT INTO PLAN VALUES(default,6,34,8);
INSERT INTO PLAN VALUES(default,6,34,9);
INSERT INTO PLAN VALUES(default,6,34,10);
INSERT INTO PLAN VALUES(default,3,28,1);
INSERT INTO PLAN VALUES(default,3,24,2);
INSERT INTO PLAN VALUES(default,3,24,3);
INSERT INTO PLAN VALUES(default,10,18,4);
INSERT INTO PLAN VALUES(default,10,18,5);
INSERT INTO PLAN VALUES(default,7,30,6);
INSERT INTO PLAN VALUES(default,7,30,7);
INSERT INTO PLAN VALUES(default,4,30,8);
INSERT INTO PLAN VALUES(default,4,30,9);
INSERT INTO PLAN VALUES(default,4,30,1);
INSERT INTO PLAN VALUES(default,4,30,2);
INSERT INTO PLAN VALUES(default,4,30,3);
INSERT INTO PLAN VALUES(default,11,26,4);
INSERT INTO PLAN VALUES(default,11,32,5);
INSERT INTO PLAN VALUES(default,11,26,6);
INSERT INTO PLAN VALUES(default,11,26,7);
INSERT INTO PLAN VALUES(default,10,22,8);
INSERT INTO PLAN VALUES(default,10,22,9);
INSERT INTO PLAN VALUES(default,7,30,10);
INSERT INTO PLAN VALUES(default,10,18,1);
INSERT INTO PLAN VALUES(default,10,18,2);


INSERT INTO PAIR VALUES(default,6,10,7,1,'10:30',1);
INSERT INTO PAIR VALUES(default,6,10,7,2,'10:30',1);
INSERT INTO PAIR VALUES(default,6,10,7,3,'10:30',1);
INSERT INTO PAIR VALUES(default,6,10,7,4,'10:30',1);
INSERT INTO PAIR VALUES(default,6,10,7,5,'10:30',1);
INSERT INTO PAIR VALUES(default,6,10,7,6,'12:00',1);
INSERT INTO PAIR VALUES(default,6,10,7,7,'12:00',1);
INSERT INTO PAIR VALUES(default,6,10,7,8,'12:00',1);
INSERT INTO PAIR VALUES(default,6,10,7,9,'12:00',1);
INSERT INTO PAIR VALUES(default,6,10,7,10,'12:00',1);
INSERT INTO PAIR VALUES(default,6,10,7,1,'9:00',5);
INSERT INTO PAIR VALUES(default,6,10,7,2,'9:00',5);
INSERT INTO PAIR VALUES(default,6,10,7,3,'10:30',5);
INSERT INTO PAIR VALUES(default,6,10,7,4,'10:30',5);
INSERT INTO PAIR VALUES(default,6,10,7,5,'10:30',5);
INSERT INTO PAIR VALUES(default,6,10,7,6,'12:00',5);
INSERT INTO PAIR VALUES(default,6,10,7,7,'12:00',5);
INSERT INTO PAIR VALUES(default,6,10,7,8,'12:00',5);
INSERT INTO PAIR VALUES(default,6,10,7,9,'12:00',5);
INSERT INTO PAIR VALUES(default,6,10,7,10,'12:00',5);
INSERT INTO PAIR VALUES(default,1,1,4,1,'12:00',1);
INSERT INTO PAIR VALUES(default,1,1,4,2,'12:00',1);
INSERT INTO PAIR VALUES(default,1,1,4,3,'12:00',1);
INSERT INTO PAIR VALUES(default,1,1,4,4,'12:00',1);
INSERT INTO PAIR VALUES(default,1,1,4,5,'12:00',1);
INSERT INTO PAIR VALUES(default,1,2,5,6,'14:40',1);
INSERT INTO PAIR VALUES(default,1,2,5,7,'14:40',1);
INSERT INTO PAIR VALUES(default,1,2,5,8,'14:40',1);
INSERT INTO PAIR VALUES(default,1,2,5,9,'14:40',1);
INSERT INTO PAIR VALUES(default,1,2,5,10,'14:40',1);
INSERT INTO PAIR VALUES(default,1,1,4,1,'12:00',4);
INSERT INTO PAIR VALUES(default,1,1,4,2,'12:00',4);
INSERT INTO PAIR VALUES(default,1,1,4,3,'12:00',4);
INSERT INTO PAIR VALUES(default,1,1,4,4,'12:00',4);
INSERT INTO PAIR VALUES(default,1,1,4,5,'12:00',4);
INSERT INTO PAIR VALUES(default,1,2,5,6,'14:40',4);
INSERT INTO PAIR VALUES(default,1,2,5,7,'14:40',4);
INSERT INTO PAIR VALUES(default,1,2,5,8,'14:40',4);
INSERT INTO PAIR VALUES(default,1,2,5,9,'14:40',4);
INSERT INTO PAIR VALUES(default,1,2,5,10,'14:40',4);
INSERT INTO PAIR VALUES(default,1,1,1,1,'10:30',4);
INSERT INTO PAIR VALUES(default,1,2,3,2,'10:30',4);
INSERT INTO PAIR VALUES(default,1,3,4,3,'10:30',4);
INSERT INTO PAIR VALUES(default,1,4,5,4,'10:30',4);
INSERT INTO PAIR VALUES(default,1,5,6,5,'10:30',4);
INSERT INTO PAIR VALUES(default,1,1,1,6,'12:00',4);
INSERT INTO PAIR VALUES(default,1,2,3,7,'12:00',4);
INSERT INTO PAIR VALUES(default,1,3,4,8,'12:00',4);
INSERT INTO PAIR VALUES(default,1,4,5,9,'12:00',4);
INSERT INTO PAIR VALUES(default,1,5,6,10,'12:00',4);
INSERT INTO PAIR VALUES(default,2,9,2,1,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,2,2,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,2,3,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,2,4,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,2,5,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,2,6,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,2,7,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,2,8,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,2,9,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,2,10,'16:20',1);
INSERT INTO PAIR VALUES(default,2,9,1,1,'12:00',5);
INSERT INTO PAIR VALUES(default,2,8,3,2,'12:00',5);
INSERT INTO PAIR VALUES(default,2,9,1,3,'9:20',5);
INSERT INTO PAIR VALUES(default,2,8,3,4,'9:20',5);
INSERT INTO PAIR VALUES(default,2,7,4,5,'9:20',5);
INSERT INTO PAIR VALUES(default,2,9,1,6,'14:35',5);
INSERT INTO PAIR VALUES(default,2,8,3,7,'14:35',5);
INSERT INTO PAIR VALUES(default,2,7,4,8,'14:35',5);
INSERT INTO PAIR VALUES(default,2,9,1,9,'14:35',5);
INSERT INTO PAIR VALUES(default,2,8,3,10,'14:35',5);
INSERT INTO PAIR VALUES(default,8,6,2,1,'10:30',6);
INSERT INTO PAIR VALUES(default,8,6,2,2,'10:30',6);
INSERT INTO PAIR VALUES(default,8,6,2,3,'10:30',6);
INSERT INTO PAIR VALUES(default,8,6,2,4,'10:30',6);
INSERT INTO PAIR VALUES(default,8,6,2,5,'10:30',6);
INSERT INTO PAIR VALUES(default,8,6,2,6,'12:00',6);
INSERT INTO PAIR VALUES(default,8,6,2,7,'12:00',6);
INSERT INTO PAIR VALUES(default,8,6,2,8,'12:00',6);
INSERT INTO PAIR VALUES(default,8,6,2,9,'12:00',6);
INSERT INTO PAIR VALUES(default,8,6,2,10,'12:00',6);
INSERT INTO PAIR VALUES(default,5,2,2,10,'10:30',6);
INSERT INTO PAIR VALUES(default,5,2,2,9,'10:30',6);
INSERT INTO PAIR VALUES(default,5,2,2,8,'10:30',6);
INSERT INTO PAIR VALUES(default,5,2,2,7,'10:30',6);
INSERT INTO PAIR VALUES(default,5,2,2,6,'10:30',6);
INSERT INTO PAIR VALUES(default,5,3,2,5,'12:00',6);
INSERT INTO PAIR VALUES(default,5,3,2,4,'12:00',6);
INSERT INTO PAIR VALUES(default,5,3,2,3,'12:00',6);
INSERT INTO PAIR VALUES(default,5,3,2,2,'12:00',6);
INSERT INTO PAIR VALUES(default,5,3,2,1,'12:00',6);
INSERT INTO PAIR VALUES(default,5,4,9,10,'9:00',2);
INSERT INTO PAIR VALUES(default,5,3,10,9,'9:00',2);
INSERT INTO PAIR VALUES(default,5,2,11,8,'9:00',2);
INSERT INTO PAIR VALUES(default,5,4,9,7,'10:40',2);
INSERT INTO PAIR VALUES(default,5,3,10,6,'10:40',2);
INSERT INTO PAIR VALUES(default,5,2,11,5,'10:40',2);
INSERT INTO PAIR VALUES(default,5,3,10,4,'12:00',2);
INSERT INTO PAIR VALUES(default,5,2,9,3,'12:00',2);
INSERT INTO PAIR VALUES(default,5,3,10,2,'12:00',2);
INSERT INTO PAIR VALUES(default,5,2,9,1,'12:00',2);
INSERT INTO PAIR VALUES(default,3,7,9,1,'14:00',2);
INSERT INTO PAIR VALUES(default,3,7,9,2,'14:00',2);
INSERT INTO PAIR VALUES(default,3,7,9,3,'14:00',2);
INSERT INTO PAIR VALUES(default,3,8,11,1,'9:00',3);
INSERT INTO PAIR VALUES(default,3,7,11,2,'9:00',3);
INSERT INTO PAIR VALUES(default,3,6,11,3,'9:00',3);
INSERT INTO PAIR VALUES(default,10,4,12,9,'12:00',3);
INSERT INTO PAIR VALUES(default,10,4,12,8,'12:00',3);
INSERT INTO PAIR VALUES(default,10,4,12,5,'12:00',3);
INSERT INTO PAIR VALUES(default,10,1,10,4,'12:00',3);
INSERT INTO PAIR VALUES(default,10,1,10,2,'12:00',3);
INSERT INTO PAIR VALUES(default,10,1,10,1,'12:00',3);
INSERT INTO PAIR VALUES(default,10,4,11,9,'16:00',4);
INSERT INTO PAIR VALUES(default,10,1,12,8,'16:00',4);
INSERT INTO PAIR VALUES(default,10,4,12,5,'18:00',4);
INSERT INTO PAIR VALUES(default,10,1,11,4,'18:00',4);
INSERT INTO PAIR VALUES(default,10,4,11,2,'14:00',4);
INSERT INTO PAIR VALUES(default,10,1,12,1,'14:00',4);
INSERT INTO PAIR VALUES(default,7,5,4,6,'9:00',2);
INSERT INTO PAIR VALUES(default,7,5,4,7,'9:00',2);
INSERT INTO PAIR VALUES(default,7,5,4,10,'9:00',2);
INSERT INTO PAIR VALUES(default,7,6,6,6,'11:00',2);
INSERT INTO PAIR VALUES(default,7,7,7,7,'11:00',2);
INSERT INTO PAIR VALUES(default,7,8,8,10,'11:00',2);
INSERT INTO PAIR VALUES(default,4,10,2,1,'16:30',3);
INSERT INTO PAIR VALUES(default,4,10,2,2,'16:30',3);
INSERT INTO PAIR VALUES(default,4,10,2,3,'16:30',3);
INSERT INTO PAIR VALUES(default,4,10,2,8,'16:30',3);
INSERT INTO PAIR VALUES(default,4,10,2,9,'16:30',3);
INSERT INTO PAIR VALUES(default,11,6,1,7,'15:30',2);
INSERT INTO PAIR VALUES(default,11,7,3,6,'15:30',2);
INSERT INTO PAIR VALUES(default,11,2,4,5,'15:30',2);
INSERT INTO PAIR VALUES(default,11,3,5,4,'15:30',2);
INSERT INTO PAIR VALUES(default,11,2,10,7,'16:50',3);
INSERT INTO PAIR VALUES(default,11,2,10,6,'16:50',3);
INSERT INTO PAIR VALUES(default,11,2,10,5,'16:50',3);
INSERT INTO PAIR VALUES(default,11,2,10,4,'16:50',3);


ALTER TABLE PLAN ADD 
	FOREIGN KEY (subject_id) 
	REFERENCES SUBJECT (subject_id) ON DELETE CASCADE;

ALTER TABLE PLAN ADD 
	FOREIGN KEY (group_id) 
	REFERENCES GROUPS (group_id) ON DELETE CASCADE;

ALTER TABLE PAIR ADD
	FOREIGN KEY (subject_id) 
	REFERENCES SUBJECT (subject_id) ON DELETE CASCADE;

ALTER TABLE PAIR ADD
	FOREIGN KEY (Teachers)
	REFERENCES TEACHER (teacher_id) ON DELETE CASCADE;

ALTER TABLE PAIR ADD
	FOREIGN KEY (classrooms)
	REFERENCES CLASSROOM (classroom_id) ON DELETE CASCADE;


ALTER TABLE PAIR ADD
	FOREIGN KEY (groups)
	REFERENCES GROUPS (group_id) ON DELETE CASCADE;
